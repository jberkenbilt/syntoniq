# https://taskfile.dev

version: '3'

env:
  CLICOLOR_FORCE: 1

tasks:
  build:
    desc: "Run development build"
    cmds:
      - ./build.sh
    silent: true

  coverage:
    desc: "Run coverage build and coverage testing"
    cmds:
      - ./coverage.sh
    silent: true

  manual-autogen:
    dir: manual/static-src
    cmds:
      - task default

  manual-serve:
    desc: "Serve manual for editing"
    dir: manual
    deps:
      - manual-autogen
    cmds:
      - zola serve

  manual-build:
    desc: "Build manual"
    dir: manual
    cmds:
      - ./build

  deploy-manual:
    desc: "Deploy manual to S3"
    dir: manual
    cmds:
      - ./deploy

// Generated by Gemini 3 Pro
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('pre').forEach((pre) => {
        // 1. Create the button
        const button = document.createElement('button');
        button.className = 'copy-code-button';
        button.innerText = 'Copy';

        // 2. Add Click Event
        button.addEventListener('click', () => {
            // Get the text content of the <code> element inside the <pre>
            const code = pre.querySelector('code');
            const text = code ? code.innerText : pre.innerText;

            navigator.clipboard.writeText(text).then(() => {
                button.innerText = 'Copied!';
                button.classList.add('copied');

                // Reset after 2 seconds
                setTimeout(() => {
                    button.innerText = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                button.innerText = 'Error';
            });
        });

        // 3. Append button to the pre block
        // We ensure the pre block is positioned relatively in CSS so the absolute button works
        pre.appendChild(button);
    });
});
